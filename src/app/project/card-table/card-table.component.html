<div class="card-table-container">
  <md-card class="column todo" dnd-droppable (onDropSuccess)="onDropSuccess($event, 'ToDo')" [dropZones]="['todo-zone']">
    <div class="header">
      <div class="icon">
        <md-icon>assignment</md-icon>
      </div>
      To-Do
    </div>
    <md-list>
      <div *ngFor="let task of tasks; let i = index">
        <div class="list" *ngIf="task.type.name === 'ToDo'"
          dnd-draggable
          (onDragSuccess)="onDragSuccess(i, 1)"
          [dragEnabled]="true"
          [dragData]="task"
          [dropZones]="['doing-zone']">
          <md-list-item>
            <md-icon md-list-avatar>assignment</md-icon>
            <h4 class="task-name" md-line (click)="openTask(task)">{{ task.name }}</h4>
            <p class="task-start" md-line>{{ task.start | amDateFormat: 'LL' }}</p>
          </md-list-item>
          <p class="task-description" [innerHTML]="task?.description"></p>
        </div>
      </div>
    </md-list>
    <div class="button-create black" *ngIf="isMe">
      <button (click)="openDialog()">
        <md-icon>add</md-icon>
        <br>
        <span>Create new task</span>
      </button>
    </div> <!-- button-create -->
  </md-card>
  <md-card class="column doing" dnd-droppable (onDropSuccess)="onDropSuccess($event, 'Doing')" [dropZones]="['doing-zone']">
    <div class="header">
      <div class="icon">
        <md-icon>assignment_returned</md-icon>
      </div>
      Doing
    </div>
    <md-list>
      <div *ngFor="let task of tasks; let i = index">
        <div class="list" *ngIf="task.type.name === 'Doing'"
          dnd-draggable
          (onDragSuccess)="onDragSuccess(i, 2)"
          [dragEnabled]="true"
          [dragData]="task"
          [dropZones]="['todo-zone', 'done-zone']">
          <md-list-item>
            <md-icon md-list-avatar>assignment_returned</md-icon>
            <h4 class="task-name" md-line (click)="openTask(task)">{{ task.name }}</h4>
            <p class="task-start" md-line>{{ task.start | amDateFormat: 'LL' }}</p>
          </md-list-item>
          <p class="task-description" [innerHTML]="task?.description"></p>
        </div>
      </div>
    </md-list>
  </md-card>
  <md-card class="column done" dnd-droppable (onDropSuccess)="onDropSuccess($event, 'Done')" [dropZones]="['done-zone']">
    <div class="header">
      <div class="icon">
        <md-icon>assignment_turned_in</md-icon>
      </div>
      Done
    </div>
    <md-list>
      <div *ngFor="let task of tasks; let i = index">
        <div class="list" *ngIf="task.type.name === 'Done'"
          dnd-draggable
          (onDragSuccess)="onDragSuccess(i, 3)"
          [dragEnabled]="true"
          [dragData]="task"
          [dropZones]="['todo-zone', 'doing-zone']">
          <md-list-item>
            <md-icon md-list-avatar>assignment_turned_in</md-icon>
            <h4 class="task-name" md-line (click)="openTask(task)">{{ task.name }}</h4>
            <p class="task-start" md-line>{{ task.start | amDateFormat: 'LL' }}</p>
          </md-list-item>
          <p class="task-description" [innerHTML]="task?.description"></p>
        </div>
      </div>
    </md-list>
  </md-card>
</div>
